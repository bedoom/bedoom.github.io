---
layout: article
title: "操作系统专题复习之文件管理"
date: 2021-12-11
modify_date: 2021-12-11
author: "Bedoom"
mathjax_autoNumber: false
show_tags: true
tags:
  - HBU考试内容
---

终于快复习完了 :star2:

![luca-upper-Z-4kOr93RCI-unsplash](https://gitee.com/bedoom/images/raw/master/202112111711994.jpg)

<!--more-->

## 简答题

1. 文件是在（）上具有完整意义的（），它有一个（）作为标识。

   逻辑；信息集合；名字

2. 文件的逻辑结构：用户按照（）组织文件，这种文件是独立于（）而构造的。文件的逻辑结构分为两类：（）和（）

   自己对信息的使用要求；物理环境；记录式文件和流式文件

3. 文件的物理结构：文件在（）上的存储组织形式，这与（）的性质有关。

   外存；存储介质

4. 顺序存储设备只能用于（）。

   顺序文件

5. 顺序文件：（）存放到（）上以便形成顺序结构。

   连续的信息；磁盘上连续相邻的块

6. 链接分配时采用（）方式。

   离散分配

7. 索引文件：为文件分配一个（），把分配给该文件的所有盘号都记录在该索引块中。

   索引号

8. 文件控制块中的内容：（）、（）、（）。

   有关文件存取控制的信息；有关文件结构的信息；有关文件管理的信息

## 连续外存空间管理

* 数据结构

  系统为每个磁盘建立一个空闲表，表中每个登记项记录一组连续空间块的首块号。

  ![image-20211211214831767](https://gitee.com/bedoom/images/raw/master/202112112148566.png){:.shadow}

* 分配算法 设需要申请的空闲块数为u.size

  1. 将空闲表按照连续空闲块数升序排列，从头开始遍历，寻找第一个 v.size >= u.size 的连续空闲单元。若遍历完成，没有找到满足条件的空闲单元，则申请失败；否则转步骤2
  2. 若v.size - u.size < 阈值 时，将此空闲块移除空闲表，否则，首块号 = 首块号 - u.size; v.size = v.size - u.size;

* 回收算法 回收空闲块S

  若回收区与插入点的前一个分区相邻，则与前一个分区合并。

  若回收区与插入点的后一个分区相邻，则与后一个分区合并。

  若回收区与插入点的前后两个分区都相邻，则与前面的分区合并。

  若回收区与插入点的前后两个分区都不相邻，则新建一个表项，填写回收区的首地址和大小。

## 离散外存空间管理

* 数据结构：采用位示图的方法，用一位来表示一块内存块，用一位的两种状态来表示内存块是空闲还是已分配 ，空闲块总数

* 分配方法：

  根据进程的页数得到其所需的物理块数，检查空闲物理块总数是否足够，不能满足则分配失败；能满足该进程的需求，则查位示图中

  为“0”的位，计算出物理块号，并写入进程的页表。位示图中第i个字的第j位对应的物理块号为：

  块号=i×位示图中的字长+j

* 回收方法：

  根据回收进程的页表，依次计算每个物理块所对应的位在位示图中的位置第i字，第j位，并将该位置0，最后增加空闲物理块总数。

  ​         i=块号/位示图中的字长

  ​         j=块号%位示图中的字长



